%h1.title= "Register your Credit Card"
%form#registration_form{:action => "", :method => "POST"}
  %input.card-number{:type => "string", :value => ""}
  %select.expiration-month
    %option{:value =>"1"}= "1"
    %option{:value =>"2"}= "2"
    %option{:value =>"3"}= "3"
    %option{:value =>"4"}= "4"
    %option{:value =>"5"}= "5"
    %option{:value =>"6"}= "6"
    %option{:value =>"7"}= "7"
    %option{:value =>"8"}= "8"
    %option{:value =>"9"}= "9"
    %option{:value =>"10"}= "10"
    %option{:value =>"11"}= "11"
    %option{:value =>"12"}= "12"
  %select.expiration-year
    %option{:value => "2013"}= "2013"
    %option{:value => "2014"}= "2014"
    %option{:value => "2015"}= "2015"
    %option{:value => "2016"}= "2016"
    %option{:value => "2017"}= "2017"
    %option{:value => "2018"}= "2018"
    %option{:value => "2019"}= "2019"
    %option{:value => "2020"}= "2020"
    %option{:value => "2021"}= "2021"
    %option{:value => "2022"}= "2022"
  %input.submit-button{:type => "submit", :value => "submit"}

%script{:src => "https://js.cardspring.com/v1/cs.js"}

:javascript
  $(document).ready(function() {
    $('#registration_form').submit(function(event) {
      $('.submit-button').attr('disabled', 'disabled');
      CardSpring.addCard(
          cardSpringResponseHandler,
          {
            publisher_id: 'A8pLh1jNshzaLkPP6fOy6YGhf5EKxXBm',
            security_token: 'AAWvJaOqIMhfb3XfhlbFP1QtHXdCbgVq',
            timestamp: ""/*@timestamp*/,
            hmac: ""/*@hmac*/,
            test_mode: true /*@test_mode*/
          },
          {
            card_number: $('.card-number').val(),
            exp_month: $('.expiration-month').val(),
            exp_year: $('.expiration-year').val(),
            user_id: "" /*@user_id*/
          },
          "OcGd5dea22Cs"
          );
      return false;
    });
  });
